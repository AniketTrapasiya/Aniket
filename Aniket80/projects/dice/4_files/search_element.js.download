var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$jscomp=$jscomp||{};$jscomp.scope={},$jscomp.findInternal=function(t,e,i){t instanceof String&&(t=String(t));for(var o=t.length,n=0;n<o;n++){var r=t[n];if(e.call(i,r,n,t))return{i:n,v:r}}return{i:-1,v:void 0}},$jscomp.ASSUME_ES5=!1,$jscomp.ASSUME_NO_NATIVE_MAP=!1,$jscomp.ASSUME_NO_NATIVE_SET=!1,$jscomp.SIMPLE_FROUND_POLYFILL=!1,$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){t!=Array.prototype&&t!=Object.prototype&&(t[e]=i.value)},$jscomp.getGlobal=function(t){return("undefined"==typeof window||window!==t)&&"undefined"!=typeof global&&null!=global?global:t},$jscomp.global=$jscomp.getGlobal(this),$jscomp.polyfill=function(t,e,i,o){if(e){for(i=$jscomp.global,t=t.split("."),o=0;o<t.length-1;o++){var n=t[o];n in i||(i[n]={}),i=i[n]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&$jscomp.defineProperty(i,t,{configurable:!0,writable:!0,value:e})}},$jscomp.polyfill("Array.prototype.find",function(t){return t||function(t,e){return $jscomp.findInternal(this,t,e).v}},"es6","es3");var InitColorBlockSlide=function(h){function i(t,e){var i,o,n,r,s,a,c,l,d;N.length>=h.colorPickMax||(N.length||Y.show(),console.log("createObj",t),i=t.color.toLocaleUpperCase(),o=$(document.createElement("li")),n=$(document.createElement("div")),r=$(document.createElement("b")),s=$(document.createElement("i")),a=$('<i class="iconfont icon-cha"></i>'),c=$('<i class="iconfont icon-yanse"></i>'),l=$(document.createElement("span")),n.addClass("color-controls"),d=i.slice(1),r.text(i).attr("data-clipboard-text",d),s.addClass("colorPer-text").text("("+parseInt(100*t.per)+"%)"),a.addClass("remove-btn").data("uinid",t.uinid),c.addClass("custom-btn"),l.addClass("separator"),l.data("curColorBlockIndex",U.find("li").length),n.append(r).append(s).append(a).append(c).append(l),o.css("background-color",i).append(n),a.on("click",function(t){t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0,t=$(this).parents("li").index();for(var e=[],i=0;i<N.length;i++)i!=t&&e.push(N[i]);return h.onChange("remove","",e),!1}),N.push(t),U.append(o),Q.push(o),e?p(e):p(),u(i))}function u(t){for(var e=0,i=usuColorsArr.length;e<i;e++)t==usuColorsArr[e]&&usuColors.eq(e).toggleClass("active")}function p(t){var e=U.children(":last"),i=parseInt(100*N[N.length-1].per);e.css("width",i+"%"),initing||console.log("reset",N),t&&(initing=!1)}h.colorPickMax||(h.colorPickMax=5);var e,t,o,n,r,s,a,c,l,d,f,m,g,v,y,k,b=(t={eventName:"click",onShow:function(){},onBeforeShow:function(){},onHide:function(){},onChange:function(){},onSubmit:function(){},color:"ff0000",livePreview:!0,flat:!(e=65)},o=function(t){var e=$(this).parent().parent();if(0<this.parentNode.className.indexOf("_hex")){var i=e.data("colorpicker"),o=this.value,n=6-o.length;if(0<n){for(var r=[],s=0;s<n;s++)r.push("0");r.push(o),o=r.join("")}i.color=i=v(g(o))}else 0<this.parentNode.className.indexOf("_hsb")?e.data("colorpicker").color=i=m({h:parseInt(e.data("colorpicker").fields.eq(4).val(),10),s:parseInt(e.data("colorpicker").fields.eq(5).val(),10),b:parseInt(e.data("colorpicker").fields.eq(6).val(),10)}):(i=e.data("colorpicker"),o=parseInt(e.data("colorpicker").fields.eq(1).val(),10),n=parseInt(e.data("colorpicker").fields.eq(2).val(),10),r=parseInt(e.data("colorpicker").fields.eq(3).val(),10),i.color=i=v({r:Math.min(255,Math.max(0,o)),g:Math.min(255,Math.max(0,n)),b:Math.min(255,Math.max(0,r))}));t&&(_(i,e.get(0)),w(i,e.get(0)),x(i,e.get(0))),C(i,e.get(0)),E(i,e.get(0)),S(i,e.get(0)),e.data("colorpicker").onChange.apply(e,[i,k(y(i)),y(i)])},n=function(t){return t.data.field.val(Math.max(0,Math.min(t.data.max,parseInt(t.data.val+t.pageY-t.data.y,10)))),t.data.preview&&o.apply(t.data.field.get(0),[!0]),!1},r=function t(e){return o.apply(e.data.field.get(0),[!0]),e.data.el.removeClass("colorpicker_slider").find("input").focus(),$(document).unbind("mouseup",t),$(document).unbind("mousemove",n),!1},s=function(t){return o.apply(t.data.cal.data("colorpicker").fields.eq(4).val(parseInt(360*(150-Math.max(0,Math.min(150,t.pageY-t.data.y)))/150,10)).get(0),[t.data.preview]),!1},a=function t(e){return _(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),w(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),$(document).unbind("mouseup",t),$(document).unbind("mousemove",s),!1},c=function(t){return o.apply(t.data.cal.data("colorpicker").fields.eq(6).val(parseInt(100*(150-Math.max(0,Math.min(150,t.pageY-t.data.pos.top)))/150,10)).end().eq(5).val(parseInt(100*Math.max(0,Math.min(150,t.pageX-t.data.pos.left))/150,10)).get(0),[t.data.preview]),!1},l=function t(e){return _(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),w(e.data.cal.data("colorpicker").color,e.data.cal.get(0)),$(document).unbind("mouseup",t),$(document).unbind("mousemove",c),!1},d=function t(e){f(e.data.cal.get(0),e.target,e.data.cal.get(0))||(0!=e.data.cal.data("colorpicker").onHide.apply(this,[e.data.cal.get(0)])&&e.data.cal.hide(),$(document).unbind("mousedown",t))},f=function(t,e,i){if(t==e)return!0;if(t.contains)return t.contains(e);if(t.compareDocumentPosition)return!!(16&t.compareDocumentPosition(e));for(e=e.parentNode;e&&e!=i;){if(e==t)return!0;e=e.parentNode}return!1},m=function(t){return{h:Math.min(360,Math.max(0,t.h)),s:Math.min(100,Math.max(0,t.s)),b:Math.min(100,Math.max(0,t.b))}},g=function(t){return{r:(t=parseInt(-1<t.indexOf("#")?t.substring(1):t,16))>>16,g:(65280&t)>>8,b:255&t}},v=function(t){var e={h:0,s:0,b:0},i=Math.max(t.r,t.g,t.b),o=i-Math.min(t.r,t.g,t.b);return e.b=i,e.s=0!=i?255*o/i:0,e.h=0!=e.s?t.r==i?(t.g-t.b)/o:t.g==i?2+(t.b-t.r)/o:4+(t.r-t.g)/o:-1,e.h*=60,e.h<0&&(e.h+=360),e.s*=100/255,e.b*=100/255,e},y=function(t){var e=t.h,i=t.s/100;t=t.b/100;var o=Math.floor(e/60)%6,n=e/60-o,e=t*(1-i),r=t*(1-n*i),i=t*(1-(1-n)*i);switch(o){case 0:var s=t,a=i,c=e;break;case 1:s=r,a=t,c=e;break;case 2:s=e,a=t,c=i;break;case 3:s=e,a=r,c=t;break;case 4:s=i,a=e,c=t;break;case 5:s=t,a=e,c=r}return{r:Math.round(255*s),g:Math.round(255*a),b:Math.round(255*c)}},k=function(t){var i=[t.r.toString(16),t.g.toString(16),t.b.toString(16)];return $.each(i,function(t,e){1==e.length&&(i[t]="0"+e)}),i.join("")},{init:function(i){if("string"==typeof(i=$.extend({},t,i||{})).color)i.color=v(g(i.color));else if(null!=i.color.r&&null!=i.color.g&&null!=i.color.b)i.color=v(i.color);else{if(null==i.color.h||null==i.color.s||null==i.color.b)return this;i.color=m(i.color)}return this.each(function(){var t,e;$(this).data("colorpickerId")||((t=$.extend({},i)).origColor=i.color,e="collorpicker_"+parseInt(1e3*Math.random()),$(this).data("colorpickerId",e),e=$('<div class="colorpicker"><div class="colorpicker_color"><div><div></div></div></div><div class="colorpicker_hue"><div></div></div><div class="colorpicker_new_color"></div><div class="colorpicker_current_color"></div><div class="colorpicker_hex"><input type="text" maxlength="6" size="6" /></div><div class="colorpicker_rgb_r colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_g colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_rgb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_h colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_s colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_hsb_b colorpicker_field"><input type="text" maxlength="3" size="3" /><span></span></div><div class="colorpicker_submit graHover">OK</div><div class="colorpicker_cancel">CANCEL</div></div>').attr("id",e),t.flat?e.appendTo(this).show():e.appendTo(document.body),t.fields=e.find("input").bind("keyup",B).bind("change",o).bind("blur",W).bind("focus",j),e.find("span").bind("mousedown",z).end().find(">div.colorpicker_current_color").bind("click",q),t.selector=e.find("div.colorpicker_color").bind("mousedown",P),t.selectorIndic=t.selector.find("div div"),t.el=this,t.hue=e.find("div.colorpicker_hue div"),e.find("div.colorpicker_hue").bind("mousedown",L),t.newColor=e.find("div.colorpicker_new_color"),t.currentColor=e.find("div.colorpicker_current_color"),e.data("colorpicker",t),e.find("div.colorpicker_submit").bind("mouseenter",M).bind("mouseleave",O).bind("click",T),e.find("div.colorpicker_cancel").bind("click",D),_(t.color,e.get(0)),x(t.color,e.get(0)),w(t.color,e.get(0)),E(t.color,e.get(0)),C(t.color,e.get(0)),I(t.color,e.get(0)),S(t.color,e.get(0)),t.flat?e.css({position:"relative",display:"block"}):$(this).bind(t.eventName,A))})},showPicker:function(){return this.each(function(){$(this).data("colorpickerId")&&A.apply(this)})},hidePicker:function(){return this.each(function(){$(this).data("colorpickerId")&&$("#"+$(this).data("colorpickerId")).hide()})},setColor:function(e){if("string"==typeof e)e=v(g(e));else if(null!=e.r&&null!=e.g&&null!=e.b)e=v(e);else{if(null==e.h||null==e.s||null==e.b)return this;e=m(e)}return this.each(function(){var t;$(this).data("colorpickerId")&&((t=$("#"+$(this).data("colorpickerId"))).data("colorpicker").color=e,t.data("colorpicker").origColor=e,_(e,t.get(0)),x(e,t.get(0)),w(e,t.get(0)),E(e,t.get(0)),C(e,t.get(0)),I(e,t.get(0)),S(e,t.get(0)))})}});function _(t,e){t=y(t),$(e).data("colorpicker").fields.eq(1).val(t.r).end().eq(2).val(t.g).end().eq(3).val(t.b).end()}function x(t,e){$(e).data("colorpicker").fields.eq(4).val(t.h).end().eq(5).val(t.s).end().eq(6).val(t.b).end()}function w(t,e){$(e).data("colorpicker").fields.eq(0).val(k(y(t))).end()}function C(t,e){$(e).data("colorpicker").selector.css("backgroundColor","#"+k(y({h:t.h,s:100,b:100}))),$(e).data("colorpicker").selectorIndic.css({left:parseInt(150*t.s/100,10),top:parseInt(150*(100-t.b)/100,10)})}function E(t,e){$(e).data("colorpicker").hue.css("top",parseInt(150-150*t.h/360,10))}function I(t,e){$(e).data("colorpicker").currentColor.css("backgroundColor","#"+k(y(t)))}function S(t,e){$(e).data("colorpicker").newColor.css("backgroundColor","#"+k(y(t)))}function B(t){if(t=t.charCode||t.keyCode||-1,e<t&&t<=90||32==t)return!1;!0===$(this).parent().parent().data("colorpicker").livePreview&&o.apply(this)}function W(){$(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus")}function j(){e=0<this.parentNode.className.indexOf("_hex")?70:65,$(this).parent().parent().data("colorpicker").fields.parent().removeClass("colorpicker_focus"),$(this).parent().addClass("colorpicker_focus")}function z(t){var e=$(this).parent().find("input").focus();t={el:$(this).parent().addClass("colorpicker_slider"),max:0<this.parentNode.className.indexOf("_hsb_h")?360:0<this.parentNode.className.indexOf("_hsb")?100:255,y:t.pageY,field:e,val:parseInt(e.val(),10),preview:$(this).parent().parent().data("colorpicker").livePreview},$(document).bind("mouseup",t,r),$(document).bind("mousemove",t,n)}function L(t){(t={cal:$(this).parent(),y:$(this).offset().top}).preview=t.cal.data("colorpicker").livePreview,$(document).bind("mouseup",t,a),$(document).bind("mousemove",t,s)}function P(t){(t={cal:$(this).parent(),pos:$(this).offset()}).preview=t.cal.data("colorpicker").livePreview,$(document).bind("mouseup",t,l),$(document).bind("mousemove",t,c),$(document).find(".colorpicker_color").unbind("click",c),$(document).find(".colorpicker_color").bind("click",t,c)}function M(){$(this).addClass("colorpicker_focus")}function O(){$(this).removeClass("colorpicker_focus")}function T(t){var e=(t=$(this).parent()).data("colorpicker").color;t.data("colorpicker").origColor=e,I(e,t.get(0)),t="#"+k(y(e)),$.isEmptyObject(H)?N.length<h.colorPickMax?h.onChange("add",t,N):alert("Only 5 colors at most"):(N[H.index].color=t,h.onChange("replace",t,N))}function D(){$(this).closest(".colorpicker").hide()}function A(t){var e=$("#"+$(this).data("colorpickerId"));e.data("colorpicker").onBeforeShow.apply(this,[e.get(0)]);var i=$(this).offset(),o="CSS1Compat"==document.compatMode;t=window.pageXOffset||(o?document.documentElement.scrollLeft:document.body.scrollLeft);var n=window.pageYOffset||(o?document.documentElement.scrollTop:document.body.scrollTop),r=window.innerWidth||(o?document.documentElement.clientWidth:document.body.clientWidth),s=i.top+this.offsetHeight,i=i.left;return s+176>n+(window.innerHeight||(o?document.documentElement.clientHeight:document.body.clientHeight))&&(s-=this.offsetHeight+176),t+r<i+454-113.5&&(i-=113.5),e.css({left:i+"px",top:s+"px"}),0!=e.data("colorpicker").onShow.apply(this,[e.get(0)])&&e.show(),$(document).bind("mousedown",{cal:e},d),!1}function q(){var t=$(this).parent(),e=t.data("colorpicker").origColor;t.data("colorpicker").color=e,_(e,t.get(0)),w(e,t.get(0)),x(e,t.get(0)),C(e,t.get(0)),E(e,t.get(0)),S(e,t.get(0))}$.fn.extend({ColorPicker:b.init,ColorPickerHide:b.hidePicker,ColorPickerShow:b.showPicker,ColorPickerSetColor:b.setColor});var R,F,N=[],H={},Y=$("#match_colors"),U=$("#match_colors ol"),Q=[];totalWidth=Y.width(),curr_length=U.find("li").length,usuColors=$(".block-color-wrap .color-label").not(".color-clear,.color-icon"),usuColorsArr="#E8692F #E83A30 #E72F8C #892FE8 #4030E8 #3080E8 #31C9E8 #2DE8BD #31E749 #A4E82F #E8E22F #E7B72F #E88C30 #C67D54 #269EA1 #143192 #FFA4A4 #BD1210".split(" "),draging=!1,curColorBlock=prevColorBlock=positionCur=positionStart=null,curColorBlockWidth=prevColorBlockWidth=curColorBlockIndex=prevColorBlockIndex=0,initing=!0,U.on("mousedown","span.separator",function(t){console.log("执行mousedown"),t&&t.stopPropagation?t.stopPropagation():window.event.cancelBubble=!0,draging=!0,positionStart=t.clientX,curColorBlock=$(this).parents("li"),prevColorBlock=curColorBlock.prev("li"),curColorBlockIndex=curColorBlock.index(),prevColorBlockIndex=curColorBlockIndex-1,prevColorBlockWidth=prevColorBlock.width(),curColorBlockWidth=curColorBlock.width(),totalWidth=Y.width(),console.log({total:totalWidth,pre:prevColorBlockWidth,cur:curColorBlockWidth,prei:prevColorBlockIndex,curi:curColorBlockIndex,p:positionStart})}),$(document).on("mousemove",function(t){if(draging){var e=t.clientX-positionStart;console.log(e,"dismove"),prevBlockWidth=Math.round((prevColorBlockWidth+e)/totalWidth*1e4)/100,curBlockWidth=Math.round((curColorBlockWidth-e)/totalWidth*1e4)/100,e=prevBlockWidth+curBlockWidth,prevBlockWidth<=10&&(prevBlockWidth=10,curBlockWidth=e-prevBlockWidth),curBlockWidth<=10&&(curBlockWidth=10,prevBlockWidth=e-curBlockWidth),N[prevColorBlockIndex].per=prevBlockWidth/100,N[curColorBlockIndex].per=curBlockWidth/100;for(var i=0,e=0;e<N.length;e++)i+=100*N[e].per;if(100!=i){for(e=i=0;e<N.length;e++)e!=prevColorBlockIndex&&(i+=100*N[e].per);prevBlockWidth=Math.floor(100*(100-i))/100,N[prevColorBlockIndex].per=prevBlockWidth/100}prevColorBlock.width(prevBlockWidth+"%"),curColorBlock.width(curBlockWidth+"%"),prevColorBlockWidth=prevBlockWidth/100*totalWidth,curColorBlockWidth=curBlockWidth/100*totalWidth,prevBlockWidth=Math.round(prevBlockWidth),curBlockWidth=Math.round(curBlockWidth),prevColorBlock.find(".colorPer-text").text("("+parseInt(prevBlockWidth)+"%)"),curColorBlock.find(".colorPer-text").text("("+parseInt(curBlockWidth)+"%)")}positionStart=t.clientX}),$(document).on("mouseup",function(){if(draging)return h.onChange("replace","",N),console.log("mouseup selectedBlocks",N),draging=!1}),(R=h.initColorSet).length&&(Y.show(),F=R.length,R.forEach(function(t,e){e==F-1?i(t,1):i(t)})),usuColors.on("click",function(t){var e=$(this);t.stopPropagation();var i,o,n,r=(i=e.css("background-color"),o=i.split(","),"#"+(16777216+((i=parseInt(o[0].split("(")[1]))<<16)+(parseInt(o[1])<<8)+(o=parseInt(o[2].split(")")[0]))).toString(16).slice(1));return e.hasClass("active")?(n=[],N.forEach(function(t,e){r!=t.color.toLocaleLowerCase()&&n.push(t)}),h.onChange("remove",r,n)):N.length<h.colorPickMax?h.onChange("add",r,N):alert("Only 5 colors at most"),!1}),$(".color-label.color-clear").on("click",function(t){window.location.href=window.location.href.replace(/\?.+/,"")+"?show_colors=1"}),$(".color-label.color-icon").ColorPicker({color:"#FF0000",onShow:function(t){return $(t).fadeIn(100),!1},onHide:function(t){return $(t).fadeOut(100),!1},onSubmit:function(t,e){i({color:("#"+e).toLocaleUpperCase(),per:parseInt(100/(N.length+1))/100,uinid:Date.parse(new Date)*Math.random()}),N.length<h.colorPickMax&&(h.onSinglePick&&h.onSinglePick(e),this.onHide($(".colorpicker").get(0)))}}),U.on("mousedown",".custom-btn",function(){var n=$(this).parent();H={color:n.children("[data-clipboard-text]").text(),index:n.parents("li").index()},console.log(H),$(this).ColorPicker({color:"#FF0000",onShow:function(t){return $(t).fadeIn(100),!1},onHide:function(t){return $(t).fadeOut(100),!1},onSubmit:function(t,e){console.log(111);var i=("#"+e).toLocaleUpperCase();u(t=$($(this).get(0).el.children[0]).parents("li").find("b").text().toLocaleUpperCase()),n.css("background",i),t=i.slice(1),n.find("b").text(i).attr("data-clipboard-text",t),u(i);var o=$($(this).get(0).el).prev(".remove-btn").data("uinid");N.forEach(function(t,e){t.uinid==o&&(t.color=i)}),h.onChange(N),$(".colorpicker").fadeOut(100)}})})};$(function(){var a={parse:function(t){if(0<(t=t.split("_")).length){for(var e=[],i=0;i<t.length;i++){var o,n=t[i];6<n.length&&(o=n.substring(0,6),n=n.substring(6),e.push({color:"#"+o,per:n/100,uinid:Date.parse(new Date)*Math.random()}))}return e}return[]},build:function(t){if(0<t.length){for(var e=[],i=0;i<t.length;i++)e.push(t[i].color.replace("#","")+parseInt(t[i].per));return e.join("_")}return""}},t=(t=window.location.search.match(/colors=([^&]+)/))?t[1]:"";console.log(t),InitColorBlockSlide({initColorSet:a.parse(t),onChange:function(t,e,i){Pngtree.BaseFun.loading(1,!1);try{var o=getInjectData().p}catch(t){o=1}if(o=1<o?location.href.replace("/"+o,"").replace(/\?.+/,""):location.href.replace(/\?.+/,""),"add"==t){for(var n=parseInt(100/(i.length+1)),r=[],s=0;s<i.length;s++)r.push({color:i[s].color,per:n,uinid:Date.parse(new Date)*Math.random()});r.push({color:e,per:n,uinid:Date.parse(new Date)*Math.random()}),e=a.build(r),Pngtree.BaseFun.eventStatis("colorsadd"+e,2),window.location.href=o+"?colors="+e}else if("remove"==t){for(n=parseInt(100/i.length),console.log(n),r=[],s=0;s<i.length;s++)r.push({color:i[s].color,per:n,uinid:Date.parse(new Date)*Math.random()});0==r.length?(Pngtree.BaseFun.eventStatis("colorsremove",2),window.location.href=o+"?show_colors=1"):(e=a.build(r),Pngtree.BaseFun.eventStatis("colorsremove"+e,2),window.location.href=o+"?colors="+e)}else if("replace"==t){for(r=[],s=0;s<i.length;s++)r.push({color:i[s].color,per:100*i[s].per});e=a.build(r),Pngtree.BaseFun.eventStatis("colorsreplace"+e,2),window.location.href=o+"?colors="+e}console.log("--",t,i)}})}),$(function(){var r,n;r=window,{init:function(){n=this;try{this.injectData=getInjectData()}catch(t){}var t;this.clickEvent(),"en"==lang&&0<uid&&this.filterEvent(),("en"==lang&&0<uid&&!viewArgs.isMobileDevice||6==n.injectData.type)&&this.loadScroll(),6!=n.injectData.type&&1==no_bot&&0==sem_id&&vip_type<=0&&!viewArgs.isMobileDevice&&-1!=$.inArray(parseInt(country),[14,45,31,3,5,11,73,65,32])&&(0<viewArgs.ippv||0<uid)&&this.pageRedirect(),6!=n.injectData.type&&1==n.injectData.p&&1==no_bot&&0==sem_id&&vip_type<=0&&!viewArgs.isMobileDevice&&(0<viewArgs.ippv||0<uid)&&(t=sessionStorage.getItem("_pageRedirect_"),sessionStorage.removeItem("_pageRedirect_"),$(".page-redirect .on").text(),(""!=document.referrer&&0<=document.referrer.split("/")[2].indexOf("pngtree")||t)&&this.pikBestSearch("pikbest-search"))},backPullLayout:function(){var t=$(".flexBox-images"),e=t.attr("data-type")||"default";"Illustrations"!=e&&"Illustrations_"!=e||(e="default");var i={Illustrations_Horizontal:{rowHeight:360,container:".bnPic-list",truncate:!0},Illustrations_Vertical:{rowHeight:440,container:".bnPic-list",truncate:!0},Illustrations_Square:{rowHeight:360,container:".bnPic-list",truncate:!0},default:{rowHeight:280,container:".bnPic-list",truncate:!0}};void 0!==t&&1<=t.length&&setTimeout(function(){t.flexImages(i[e])},500)},clickEvent:function(){n.backPullLayout(),$(".filter-search-option").on("click",function(){var t=$(this).children().find("a").attr("href");t&&(r.location.href=t)}),$(".pageCont").on("click","a",function(){sessionStorage.setItem("_pageRedirect_","_pageRedirect_value"),sessionStorage.setItem("_pay_search_session","_pageSearch_value")})},searchInputEvent:function(){},filterEvent:function(){function o(){e.length&&setTimeout(function(){var t=(t=24/288*e.width())<=12?12:t;e.css({"font-size":(24<=t?24:t)+"px"})})}var e=$(".coupon-search");e.length&&(o(),$(r).on("resize",function(){o()})),$(document).on("click",function(){$(".spring-active").removeClass("spring-active"),$(".spring-pricing-active").removeClass("spring-pricing-active")});var n=!!$(".ar-home").length;$(".sp-header-js").find(".sp-show-filters-js").hasClass("sp-show-active-js")&&($(".sp-header-js").find(".sp-show-filters-js").addClass("autoset"),setTimeout(function(){$(".sp-header-js").find(".sp-show-filters-js").trigger("click")},300)),$(".sp-header-js").on("click",".sp-show-filters-js",function(t){var e;t.stopPropagation(),$(this).hasClass("autoset")||$(this).hasClass("loaded")||($(this).addClass("loaded"),$(this).addClass("autoset"),e=$(this),Pngtree.BaseFun.eventStatis($(this).data("js")+($(this).hasClass("spring-show-active")?"-close":"-show"),0,function(){e.removeClass("loaded")})),this._toggled=!this._toggled,t=$(".spring-container"),$(this).toggleClass("spring-show-active").find(".sp-show-text-js").html(this._toggled?$(this).find(".sp-show-text-js").data("hide"):$(this).find(".sp-show-text-js").data("show"));var i=this._toggled?"320px":"";n?(t.css({paddingLeft:i}),$(".sectionNav-bd").css({paddingLeft:i})):(t.css({paddingRight:i}),$(".sectionNav-bd").css({paddingRight:i})),$(".spring-header").css({position:""}),o();try{$(".masonry-element").masonry("layout")}catch(t){}try{$(".flexBox-images").flexImages({rowHeight:280,container:".bnPic-list",truncate:!0})}catch(t){}}),$(".Hide-filters-icon").on("click",function(){$(".sp-show-filters-js").click()}),$(".spring-filters-dropdown").on("click",".spring-radio-link",function(t){var e;$(this).hasClass("loaded")||($(this).addClass("loaded"),e=$(this),Pngtree.BaseFun.eventStatis($(this).data("js"),2,function(){e.removeClass("loaded")})),t.stopPropagation()}).on("click",function(t){t.stopPropagation()}).on("click",".spring-radio-input",function(){r.location.href=$(this).parents("a").prop("href")}).on("click",".spring-fd-art-hd",function(t){t.stopPropagation(),$(this).find(".iconfont").toggleClass("rotate").parents(".spring-fd-art").find(".spring-fd-art-bd").slideToggle()})},loadScroll:function(){var i=r.location.search;$(r).on("scroll",function(){var t,e;1==n.injectData.type&&0!=uid&&1==n.injectData.p&&""==i&&(t=$(".back-element").offset(),e=$(document).scrollTop(),t.top-e<800&&!$(".back-element").hasClass("loaded")&&($(".back-element").addClass("loaded"),n.asyncB()))})},asyncB:function(){$.post(ajaxHost+"/api/search/back"+r.location.search,{_csrf:csrf,keyword:n.injectData.keyword,vip_type:vip_type},function(t){if(200==t.status){$(".back-element").html(t.data);try{$("img.lazy").lazyload({threshold:200,effect:"fadeIn",failure_limit:20})}catch(t){}n.backPullLayout()}},"json")},pageRedirect:function(o){o=void 0===o?0:o,$(".page-redirect").on("click","a:not(.on)",function(){var t=Pngtree.BaseFun.getLocalStorage("_redirect_")||"[]",e=(new Date).toLocaleDateString().replace(/\//g,""),i=!1;try{(t=JSON.parse(t)).search&&t.search.day&&t.search.day==e||(i=!0,t={search:{day:e}},Pngtree.BaseFun.setLocalStorage("_redirect_",JSON.stringify(t)))}catch(t){}i&&1==o&&r.open("https://picscut.com/","_blank"),i&&0==o&&(Pngtree.BaseFun.eventStatis("searchpage-pikbest",1,function(){}),r.open("/redirect?domain=1&type="+n.injectData.type+"&keyword="+n.injectData.keyword,"_blank"))})},pikBestSearch:function(o){addLoadEvent(function(){var t=!0,e=Pngtree.BaseFun.getLocalStorage("_redirectSearchHead_")||"[]",i=(new Date).toLocaleDateString().replace(/\//g,"");(e=JSON.parse(e)).hasOwnProperty("search")&&e.search.day==i&&(t=!1),$(".pikbest-search").on("click",".Sponsored_click",function(){try{e.search&&e.search.day&&e.search.day==i||(e={search:{day:i}},Pngtree.BaseFun.setLocalStorage("_redirectSearchHead_",JSON.stringify(e)))}catch(t){}}),t&&(n.injectData.default="undefined"!=n.injectData.default&&1==n.injectData.default?1:0,$.post(ajaxHost+"/api/pik-best/search",{_csrf:csrf,keyword:n.injectData.keyword,type:n.injectData.type,default:n.injectData.default},function(t){200==t.status&&$("."+o).html(t.data)},"json"))})}}.init()}),function(e,i){"function"==typeof define&&define.amd?define("jquery-bridget/jquery-bridget",["jquery"],function(t){return i(e,t)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=i(e,require("jquery")):e.jQueryBridget=i(e,e.jQuery)}(window,function(t,e){function i(c,l,d){(d=d||e||t.jQuery)&&(l.prototype.option||(l.prototype.option=function(t){d.isPlainObject(t)&&(this.options=d.extend(!0,this.options,t))}),d.fn[c]=function(t){if("string"!=typeof t)return s=t,this.each(function(t,e){(t=d.data(e,c))?(t.option(s),t._init()):(t=new l(e,s),d.data(e,c,t))}),this;var e,i,o,n,r,s,a=h.call(arguments,1);return o=a,r="$()."+c+'("'+(i=t)+'")',(e=this).each(function(t,e){(t=d.data(e,c))?(e=t[i])&&"_"!=i.charAt(0)?(t=e.apply(t,o),n=void 0===n?t:n):u(r+" is not a valid method"):u(c+" not initialized. Cannot call methods, i.e. "+r)}),void 0!==n?n:e},o(d))}function o(t){!t||t&&t.bridget||(t.bridget=i)}var h=Array.prototype.slice,n=t.console,u=void 0===n?function(){}:function(t){n.error(t)};return o(e||t.jQuery),i}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{};return-1==(t=i[t]=i[t]||[]).indexOf(e)&&t.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){if((t=this._events&&this._events[t])&&t.length)return-1!=(e=t.indexOf(e))&&t.splice(e,1),this},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var o=0,n=i[o];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];n;){var s=r&&r[n];s&&(this.off(t,n),delete r[n]),n.apply(this,e),n=i[o+=s?0:1]}return this}},t}),function(t,e){"function"==typeof define&&define.amd?define("get-size/get-size",[],e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.getSize=e()}(window,function(){function d(t){var e=parseFloat(t);return-1==t.indexOf("%")&&!isNaN(e)&&e}function h(t){return(t=getComputedStyle(t))||e("Style returned "+t+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),t}function u(t){var e,i,o;if(g||(g=!0,(e=document.createElement("div")).style.width="200px",e.style.padding="1px 2px 3px 4px",e.style.borderStyle="solid",e.style.borderWidth="1px 2px 3px 4px",e.style.boxSizing="border-box",(i=document.body||document.documentElement).appendChild(e),o=h(e),u.isBoxSizeOuter=p=200==d(o.width),i.removeChild(e)),"string"==typeof t&&(t=document.querySelector(t)),t&&"object"==(void 0===t?"undefined":_typeof(t))&&t.nodeType){if("none"==(i=h(t)).display){for(e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},i=0;i<m;i++)e[f[i]]=0;return e}for((e={}).width=t.offsetWidth,e.height=t.offsetHeight,t=e.isBorderBox="border-box"==i.boxSizing,o=0;o<m;o++){var n=f[o],r=parseFloat(i[n]);e[n]=isNaN(r)?0:r}o=e.paddingLeft+e.paddingRight,n=e.paddingTop+e.paddingBottom,r=e.marginLeft+e.marginRight;var s=e.marginTop+e.marginBottom,a=e.borderLeftWidth+e.borderRightWidth,c=e.borderTopWidth+e.borderBottomWidth;t=t&&p;var l=d(i.width);return!1!==l&&(e.width=l+(t?0:o+a)),!1!==(i=d(i.height))&&(e.height=i+(t?0:n+c)),e.innerWidth=e.width-(o+a),e.innerHeight=e.height-(n+c),e.outerWidth=e.width+r,e.outerHeight=e.height+s,e}}var p,e="undefined"==typeof console?function(){}:function(t){console.error(t)},f="paddingLeft paddingRight paddingTop paddingBottom marginLeft marginRight marginTop marginBottom borderLeftWidth borderRightWidth borderTopWidth borderBottomWidth".split(" "),m=f.length,g=!1;return u}),function(t,e){"function"==typeof define&&define.amd?define("desandro-matches-selector/matches-selector",e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.matchesSelector=e()}(window,function(){var i=function(){var t=Element.prototype;if(t.matches)return"matches";if(t.matchesSelector)return"matchesSelector";for(var e=["webkit","moz","ms","o"],i=0;i<e.length;i++){var o=e[i]+"MatchesSelector";if(t[o])return o}}();return function(t,e){return t[i](e)}}),function(e,i){"function"==typeof define&&define.amd?define("fizzy-ui-utils/utils",["desandro-matches-selector/matches-selector"],function(t){return i(e,t)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=i(e,require("desandro-matches-selector")):e.fizzyUIUtils=i(e,e.matchesSelector)}(window,function(i,n){var c={extend:function(t,e){for(var i in e)t[i]=e[i];return t},modulo:function(t,e){return(t%e+e)%e},makeArray:function(t){var e=[];if(Array.isArray(t))e=t;else if(t&&"number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e},removeFrom:function(t,e){-1!=(e=t.indexOf(e))&&t.splice(e,1)},getParent:function(t,e){for(;t!=document.body;)if(t=t.parentNode,n(t,e))return t},getQueryElement:function(t){return"string"==typeof t?document.querySelector(t):t},handleEvent:function(t){var e="on"+t.type;this[e]&&this[e](t)},filterFindElements:function(t,i){t=c.makeArray(t);var o=[];return t.forEach(function(t){if(t instanceof HTMLElement){if(!i)return void o.push(t);n(t,i)&&o.push(t),t=t.querySelectorAll(i);for(var e=0;e<t.length;e++)o.push(t[e])}}),o},debounceMethod:function(t,e,o){var n=t.prototype[e],r=e+"Timeout";t.prototype[e]=function(){var t=this[r];t&&clearTimeout(t);var e=arguments,i=this;this[r]=setTimeout(function(){n.apply(i,e),delete i[r]},o||100)}},docReady:function(t){var e=document.readyState;"complete"==e||"interactive"==e?t():document.addEventListener("DOMContentLoaded",t)},toDashed:function(t){return t.replace(/(.)([A-Z])/g,function(t,e,i){return e+"-"+i}).toLowerCase()}},l=i.console;return c.htmlInit=function(s,a){c.docReady(function(){var o="data-"+(e=c.toDashed(a)),t=document.querySelectorAll("["+o+"]"),e=document.querySelectorAll(".js-"+e),t=c.makeArray(t).concat(c.makeArray(e)),n=o+"-options",r=i.jQuery;t.forEach(function(e){var t=e.getAttribute(o)||e.getAttribute(n);try{var i=t&&JSON.parse(t)}catch(t){return void(l&&l.error("Error parsing "+o+" on "+e.className+": "+t))}i=new s(e,i),r&&r.data(e,a,i)})})},c}),function(t,e){"function"==typeof define&&define.amd?define("outlayer/item",["ev-emitter/ev-emitter","get-size/get-size"],e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(require("ev-emitter"),require("get-size")):(t.Outlayer={},t.Outlayer.Item=e(t.EvEmitter,t.getSize))}(window,function(t,e){function i(t,e){t&&(this.element=t,this.layout=e,this.position={x:0,y:0},this._create())}var o="string"==typeof(n=document.documentElement.style).transition?"transition":"WebkitTransition",n="string"==typeof n.transform?"transform":"WebkitTransform",r={WebkitTransition:"webkitTransitionEnd",transition:"transitionend"}[o],s={transform:n,transition:o,transitionDuration:o+"Duration",transitionProperty:o+"Property",transitionDelay:o+"Delay"};(t=i.prototype=Object.create(t.prototype)).constructor=i,t._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},t.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},t.getSize=function(){this.size=e(this.element)},t.css=function(t){var e,i=this.element.style;for(e in t)i[s[e]||e]=t[e]},t.getPosition=function(){var t=getComputedStyle(this.element),e=this.layout._getOption("originLeft"),i=this.layout._getOption("originTop"),o=t[e?"left":"right"],n=t[i?"top":"bottom"],t=this.layout.size,o=-1!=o.indexOf("%")?parseFloat(o)/100*t.width:parseInt(o,10),n=-1!=n.indexOf("%")?parseFloat(n)/100*t.height:parseInt(n,10);o=isNaN(o)?0:o,n=isNaN(n)?0:n,o-=e?t.paddingLeft:t.paddingRight,n-=i?t.paddingTop:t.paddingBottom,this.position.x=o,this.position.y=n},t.layoutPosition=function(){var t=this.layout.size,e={},i=this.layout._getOption("originLeft"),o=this.layout._getOption("originTop"),n=i?"right":"left";e[i?"left":"right"]=this.getXValue(this.position.x+t[i?"paddingLeft":"paddingRight"]),e[n]="",i=o?"bottom":"top",e[o?"top":"bottom"]=this.getYValue(this.position.y+t[o?"paddingTop":"paddingBottom"]),e[i]="",this.css(e),this.emitEvent("layout",[this])},t.getXValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&!e?t/this.layout.size.width*100+"%":t+"px"},t.getYValue=function(t){var e=this.layout._getOption("horizontal");return this.layout.options.percentPosition&&e?t/this.layout.size.height*100+"%":t+"px"},t._transitionTo=function(t,e){this.getPosition();var i=this.position.x,o=this.position.y,n=parseInt(t,10),r=parseInt(e,10),n=n===this.position.x&&r===this.position.y;this.setPosition(t,e),!n||this.isTransitioning?((n={}).transform=this.getTranslate(t-i,e-o),this.transition({to:n,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})):this.layoutPosition()},t.getTranslate=function(t,e){return"translate3d("+(t=this.layout._getOption("originLeft")?t:-t)+"px, "+(e=this.layout._getOption("originTop")?e:-e)+"px, 0)"},t.goTo=function(t,e){this.setPosition(t,e),this.layoutPosition()},t.moveTo=t._transitionTo,t.setPosition=function(t,e){this.position.x=parseInt(t,10),this.position.y=parseInt(e,10)},t._nonTransition=function(t){for(var e in this.css(t.to),t.isCleaning&&this._removeStyles(t.to),t.onTransitionEnd)t.onTransitionEnd[e].call(this)},t.transition=function(t){if(parseFloat(this.layout.options.transitionDuration)){var e,i=this._transn;for(e in t.onTransitionEnd)i.onEnd[e]=t.onTransitionEnd[e];for(e in t.to)i.ingProperties[e]=!0,t.isCleaning&&(i.clean[e]=!0);t.from&&this.css(t.from),this.enableTransition(t.to),this.css(t.to),this.isTransitioning=!0}else this._nonTransition(t)};var a="opacity,"+n.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()});t.enableTransition=function(){var t;this.isTransitioning||(t=this.layout.options.transitionDuration,this.css({transitionProperty:a,transitionDuration:"number"==typeof t?t+"ms":t,transitionDelay:this.staggerDelay||0}),this.element.addEventListener(r,this,!1))},t.onwebkitTransitionEnd=function(t){this.ontransitionend(t)},t.onotransitionend=function(t){this.ontransitionend(t)};var c={"-webkit-transform":"transform"};t.ontransitionend=function(t){if(t.target===this.element){var e=this._transn,i=c[t.propertyName]||t.propertyName;delete e.ingProperties[i];t:{for(o in e.ingProperties){var o=!1;break t}o=!0}o&&this.disableTransition(),i in e.clean&&(this.element.style[t.propertyName]="",delete e.clean[i]),i in e.onEnd&&(e.onEnd[i].call(this),delete e.onEnd[i]),this.emitEvent("transitionEnd",[this])}},t.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(r,this,!1),this.isTransitioning=!1},t._removeStyles=function(t){var e,i={};for(e in t)i[e]="";this.css(i)};var l={transitionProperty:"",transitionDuration:"",transitionDelay:""};return t.removeTransitionStyles=function(){this.css(l)},t.stagger=function(t){t=isNaN(t)?0:t,this.staggerDelay=t+"ms"},t.removeElem=function(){this.element.parentNode.removeChild(this.element),this.css({display:""}),this.emitEvent("remove",[this])},t.remove=function(){return o&&parseFloat(this.layout.options.transitionDuration)?(this.once("transitionEnd",function(){this.removeElem()}),void this.hide()):void this.removeElem()},t.reveal=function(){delete this.isHidden,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("visibleStyle")]=this.onRevealTransitionEnd,this.transition({from:t.hiddenStyle,to:t.visibleStyle,isCleaning:!0,onTransitionEnd:e})},t.onRevealTransitionEnd=function(){this.isHidden||this.emitEvent("reveal")},t.getHideRevealTransitionEndProperty=function(t){if((t=this.layout.options[t]).opacity)return"opacity";for(var e in t)return e},t.hide=function(){this.isHidden=!0,this.css({display:""});var t=this.layout.options,e={};e[this.getHideRevealTransitionEndProperty("hiddenStyle")]=this.onHideTransitionEnd,this.transition({from:t.visibleStyle,to:t.hiddenStyle,isCleaning:!0,onTransitionEnd:e})},t.onHideTransitionEnd=function(){this.isHidden&&(this.css({display:"none"}),this.emitEvent("hide"))},t.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},i}),function(n,r){"function"==typeof define&&define.amd?define("outlayer/outlayer",["ev-emitter/ev-emitter","get-size/get-size","fizzy-ui-utils/utils","./item"],function(t,e,i,o){return r(n,t,e,i,o)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=r(n,require("ev-emitter"),require("get-size"),require("fizzy-ui-utils"),require("./item")):n.Outlayer=r(n,n.EvEmitter,n.getSize,n.fizzyUIUtils,n.Outlayer.Item)}(window,function(t,e,n,o,r){function s(t,e){var i=o.getQueryElement(t);i?(this.element=i,l&&(this.$element=l(this.element)),this.options=o.extend({},this.constructor.defaults),this.option(e),t=++d,this.element.outlayerGUID=t,(h[t]=this)._create(),this._getOption("initLayout")&&this.layout()):c&&c.error("Bad element for "+this.constructor.namespace+": "+(i||t))}function a(t){function e(){t.apply(this,arguments)}return(e.prototype=Object.create(t.prototype)).constructor=e}function i(){}var c=t.console,l=t.jQuery,d=0,h={};s.namespace="outlayer",s.Item=r,s.defaults={containerStyle:{position:"relative"},initLayout:!0,originLeft:!0,originTop:!0,resize:!0,resizeContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}};var u=s.prototype;o.extend(u,e.prototype),u.option=function(t){o.extend(this.options,t)},u._getOption=function(t){var e=this.constructor.compatOptions[t];return e&&void 0!==this.options[e]?this.options[e]:this.options[t]},s.compatOptions={initLayout:"isInitLayout",horizontal:"isHorizontal",layoutInstant:"isLayoutInstant",originLeft:"isOriginLeft",originTop:"isOriginTop",resize:"isResizeBound",resizeContainer:"isResizingContainer"},u._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),o.extend(this.element.style,this.options.containerStyle),this._getOption("resize")&&this.bindResize()},u.reloadItems=function(){this.items=this._itemize(this.element.children)},u._itemize=function(t){t=this._filterFindItemElements(t);for(var e=this.constructor.Item,i=[],o=0;o<t.length;o++){var n=new e(t[o],this);i.push(n)}return i},u._filterFindItemElements=function(t){return o.filterFindElements(t,this.options.itemSelector)},u.getItemElements=function(){return this.items.map(function(t){return t.element})},u.layout=function(){this._resetLayout(),this._manageStamps();var t=this._getOption("layoutInstant");this.layoutItems(this.items,void 0!==t?t:!this._isLayoutInited),this._isLayoutInited=!0},u._init=u.layout,u._resetLayout=function(){this.getSize()},u.getSize=function(){this.size=n(this.element)},u._getMeasurement=function(t,e){var i,o=this.options[t];o?("string"==typeof o?i=this.element.querySelector(o):o instanceof HTMLElement&&(i=o),this[t]=i?n(i)[e]:o):this[t]=0},u.layoutItems=function(t,e){t=this._getItemsForLayout(t),this._layoutItems(t,e),this._postLayout()},u._getItemsForLayout=function(t){return t.filter(function(t){return!t.isIgnored})},u._layoutItems=function(t,i){var o;this._emitCompleteOnItems("layout",t),t&&t.length&&(o=[],t.forEach(function(t){var e=this._getItemLayoutPosition(t);e.item=t,e.isInstant=i||t.isLayoutInstant,o.push(e)},this),this._processLayoutQueue(o))},u._getItemLayoutPosition=function(){return{x:0,y:0}},u._processLayoutQueue=function(t){this.updateStagger(),t.forEach(function(t,e){this._positionItem(t.item,t.x,t.y,t.isInstant,e)},this)},u.updateStagger=function(){var t,e=this.options.stagger;return e=null==e?void(this.stagger=0):("number"!=typeof e&&(e=(t=e.match(/(^\d*\.?\d*)(\w*)/))&&t[1],t=t&&t[2],e.length?(e=parseFloat(e),e*=p[t]||1):e=0),this.stagger=e,this.stagger)},u._positionItem=function(t,e,i,o,n){o?t.goTo(e,i):(t.stagger(n*this.stagger),t.moveTo(e,i))},u._postLayout=function(){this.resizeContainer()},u.resizeContainer=function(){var t;!this._getOption("resizeContainer")||(t=this._getContainerSize())&&(this._setContainerMeasure(t.width,!0),this._setContainerMeasure(t.height,!1))},u._getContainerSize=i,u._setContainerMeasure=function(t,e){var i;void 0!==t&&((i=this.size).isBorderBox&&(t+=e?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),t=Math.max(t,0),this.element.style[e?"width":"height"]=t+"px")},u._emitCompleteOnItems=function(e,t){function i(){r.dispatchEvent(e+"Complete",null,[t])}function o(){++n==s&&i()}var n,r=this,s=t.length;t&&s?(n=0,t.forEach(function(t){t.once(e,o)})):i()},u.dispatchEvent=function(t,e,i){var o=e?[e].concat(i):i;this.emitEvent(t,o),l&&(this.$element=this.$element||l(this.element),e?((e=l.Event(e)).type=t,this.$element.trigger(e,i)):this.$element.trigger(t,i))},u.ignore=function(t){(t=this.getItem(t))&&(t.isIgnored=!0)},u.unignore=function(t){(t=this.getItem(t))&&delete t.isIgnored},u.stamp=function(t){(t=this._find(t))&&(this.stamps=this.stamps.concat(t),t.forEach(this.ignore,this))},u.unstamp=function(t){(t=this._find(t))&&t.forEach(function(t){o.removeFrom(this.stamps,t),this.unignore(t)},this)},u._find=function(t){return t?("string"==typeof t&&(t=this.element.querySelectorAll(t)),o.makeArray(t)):void 0},u._manageStamps=function(){this.stamps&&this.stamps.length&&(this._getBoundingRect(),this.stamps.forEach(this._manageStamp,this))},u._getBoundingRect=function(){var t=this.element.getBoundingClientRect(),e=this.size;this._boundingRect={left:t.left+e.paddingLeft+e.borderLeftWidth,top:t.top+e.paddingTop+e.borderTopWidth,right:t.right-(e.paddingRight+e.borderRightWidth),bottom:t.bottom-(e.paddingBottom+e.borderBottomWidth)}},u._manageStamp=i,u._getElementOffset=function(t){var e=t.getBoundingClientRect(),i=this._boundingRect;return t=n(t),{left:e.left-i.left-t.marginLeft,top:e.top-i.top-t.marginTop,right:i.right-e.right-t.marginRight,bottom:i.bottom-e.bottom-t.marginBottom}},u.handleEvent=o.handleEvent,u.bindResize=function(){t.addEventListener("resize",this),this.isResizeBound=!0},u.unbindResize=function(){t.removeEventListener("resize",this),this.isResizeBound=!1},u.onresize=function(){this.resize()},o.debounceMethod(s,"onresize",100),u.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},u.needsResizeLayout=function(){var t=n(this.element);return this.size&&t&&t.innerWidth!==this.size.innerWidth},u.addItems=function(t){return(t=this._itemize(t)).length&&(this.items=this.items.concat(t)),t},u.appended=function(t){(t=this.addItems(t)).length&&(this.layoutItems(t,!0),this.reveal(t))},u.prepended=function(t){var e;(t=this._itemize(t)).length&&(e=this.items.slice(0),this.items=t.concat(e),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(e))},u.reveal=function(t){var i;this._emitCompleteOnItems("reveal",t),t&&t.length&&(i=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*i),t.reveal()}))},u.hide=function(t){var i;this._emitCompleteOnItems("hide",t),t&&t.length&&(i=this.updateStagger(),t.forEach(function(t,e){t.stagger(e*i),t.hide()}))},u.revealItemElements=function(t){t=this.getItems(t),this.reveal(t)},u.hideItemElements=function(t){t=this.getItems(t),this.hide(t)},u.getItem=function(t){for(var e=0;e<this.items.length;e++){var i=this.items[e];if(i.element==t)return i}},u.getItems=function(t){t=o.makeArray(t);var e=[];return t.forEach(function(t){(t=this.getItem(t))&&e.push(t)},this),e},u.remove=function(t){t=this.getItems(t),this._emitCompleteOnItems("remove",t),t&&t.length&&t.forEach(function(t){t.remove(),o.removeFrom(this.items,t)},this)},u.destroy=function(){var t=this.element.style;t.height="",t.position="",t.width="",this.items.forEach(function(t){t.destroy()}),this.unbindResize(),delete h[this.element.outlayerGUID],delete this.element.outlayerGUID,l&&l.removeData(this.element,this.constructor.namespace)},s.data=function(t){return(t=(t=o.getQueryElement(t))&&t.outlayerGUID)&&h[t]},s.create=function(t,e){var i=a(s);return i.defaults=o.extend({},s.defaults),o.extend(i.defaults,e),i.compatOptions=o.extend({},s.compatOptions),i.namespace=t,i.data=s.data,i.Item=a(r),o.htmlInit(i,t),l&&l.bridget&&l.bridget(t,i),i};var p={ms:1,s:1e3};return s.Item=r,s}),function(t,e){"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e(require("outlayer"),require("get-size")):t.Masonry=e(t.Outlayer,t.getSize)}(window,function(t,r){return(t=t.create("masonry")).compatOptions.fitWidth="isFitWidth",t.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns(),this.colYs=[];for(var t=0;t<this.cols;t++)this.colYs.push(0);this.maxY=0},t.prototype.measureColumns=function(){this.getContainerWidth(),this.columnWidth||(i=this.items[0],this.columnWidth=(i=i&&i.element)&&r(i).outerWidth||this.containerWidth),i=this.columnWidth+=this.gutter;var t=this.containerWidth+this.gutter,e=i-t%i,i=Math[e&&e<1?"round":"floor"](t/i);this.cols=Math.max(i,1)},t.prototype.getContainerWidth=function(){var t=this._getOption("fitWidth")?this.element.parentNode:this.element;this.containerWidth=(t=r(t))&&t.innerWidth},t.prototype._getItemLayoutPosition=function(t){t.getSize();var e=t.size.outerWidth%this.columnWidth,e=Math[e&&e<1?"round":"ceil"](t.size.outerWidth/this.columnWidth);e=Math.min(e,this.cols);var i=this._getColGroup(e),o=Math.min.apply(Math,i);e=i.indexOf(o);var n={x:this.columnWidth*e,y:o};for(t=o+t.size.outerHeight,i=this.cols+1-i.length,o=0;o<i;o++)this.colYs[e+o]=t;return n},t.prototype._getColGroup=function(t){if(t<2)return this.colYs;for(var e=[],i=this.cols+1-t,o=0;o<i;o++){var n=this.colYs.slice(o,o+t);e[o]=Math.max.apply(Math,n)}return e},t.prototype._manageStamp=function(t){var e=r(t),i=this._getElementOffset(t),o=(t=this._getOption("originLeft")?i.left:i.right)+e.outerWidth,n=Math.floor(t/this.columnWidth),n=Math.max(0,n);for(t=Math.floor(o/this.columnWidth),t-=o%this.columnWidth?0:1,t=Math.min(this.cols-1,t),e=(this._getOption("originTop")?i.top:i.bottom)+e.outerHeight,i=n;i<=t;i++)this.colYs[i]=Math.max(e,this.colYs[i])},t.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var t={height:this.maxY};return this._getOption("fitWidth")&&(t.width=this._getContainerFitWidth()),t},t.prototype._getContainerFitWidth=function(){for(var t=0,e=this.cols;--e&&0===this.colYs[e];)t++;return(this.cols-t)*this.columnWidth-this.gutter},t.prototype.needsResizeLayout=function(){var t=this.containerWidth;return this.getContainerWidth(),t!=this.containerWidth},t}),function(t,e){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",e):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=e():t.EvEmitter=e()}("undefined"!=typeof window?window:this,function(){function t(){}var e=t.prototype;return e.on=function(t,e){if(t&&e){var i=this._events=this._events||{};return-1==(t=i[t]=i[t]||[]).indexOf(e)&&t.push(e),this}},e.once=function(t,e){if(t&&e){this.on(t,e);var i=this._onceEvents=this._onceEvents||{};return(i[t]=i[t]||{})[e]=!0,this}},e.off=function(t,e){if((t=this._events&&this._events[t])&&t.length)return-1!=(e=t.indexOf(e))&&t.splice(e,1),this},e.emitEvent=function(t,e){var i=this._events&&this._events[t];if(i&&i.length){var o=0,n=i[o];e=e||[];for(var r=this._onceEvents&&this._onceEvents[t];n;){var s=r&&r[n];s&&(this.off(t,n),delete r[n]),n.apply(this,e),n=i[o+=s?0:1]}return this}},t}),function(e,i){"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(t){return i(e,t)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&module.exports?module.exports=i(e,require("ev-emitter")):e.imagesLoaded=i(e,e.EvEmitter)}(window,function(e,t){function o(t,e){for(var i in e)t[i]=e[i];return t}function n(t,e,i){return this instanceof n?("string"==typeof t&&(t=document.querySelectorAll(t)),this.elements=function(t){var e=[];if(Array.isArray(t))e=t;else if("number"==typeof t.length)for(var i=0;i<t.length;i++)e.push(t[i]);else e.push(t);return e}(t),this.options=o({},this.options),"function"==typeof e?i=e:o(this.options,e),i&&this.on("always",i),this.getImages(),s&&(this.jqDeferred=new s.Deferred),void setTimeout(function(){this.check()}.bind(this))):new n(t,e,i)}function i(t){this.img=t}function r(t,e){this.url=t,this.element=e,this.img=new Image}var s=e.jQuery,a=e.console;(n.prototype=Object.create(t.prototype)).options={},n.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},n.prototype.addElementImages=function(t){if("IMG"==t.nodeName&&this.addImage(t),!0===this.options.background&&this.addElementBackgroundImages(t),(i=t.nodeType)&&c[i]){for(var e=t.querySelectorAll("img"),i=0;i<e.length;i++)this.addImage(e[i]);if("string"==typeof this.options.background)for(t=t.querySelectorAll(this.options.background),i=0;i<t.length;i++)this.addElementBackgroundImages(t[i])}};var c={1:!0,9:!0,11:!0};return n.prototype.addElementBackgroundImages=function(t){var e=getComputedStyle(t);if(e)for(var i=/url\((['"])?(.*?)\1\)/gi,o=i.exec(e.backgroundImage);null!==o;)(o=o&&o[2])&&this.addBackground(o,t),o=i.exec(e.backgroundImage)},n.prototype.addImage=function(t){t=new i(t),this.images.push(t)},n.prototype.addBackground=function(t,e){t=new r(t,e),this.images.push(t)},n.prototype.check=function(){function e(t,e,i){setTimeout(function(){o.progress(t,e,i)})}var o=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(t){t.once("progress",e),t.check()}):void this.complete()},n.prototype.progress=function(t,e,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!t.isLoaded,this.emitEvent("progress",[this,t,e]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,t),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,t,e)},n.prototype.complete=function(){var t=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(t,[this]),this.emitEvent("always",[this]),this.jqDeferred&&this.jqDeferred[this.hasAnyBroken?"reject":"resolve"](this)},(i.prototype=Object.create(t.prototype)).check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},i.prototype.getIsImageComplete=function(){return this.img.complete&&void 0!==this.img.naturalWidth},i.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.img,e])},i.prototype.handleEvent=function(t){var e="on"+t.type;this[e]&&this[e](t)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(r.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},r.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},r.prototype.confirm=function(t,e){this.isLoaded=t,this.emitEvent("progress",[this,this.element,e])},(n.makeJQueryPlugin=function(t){(t=t||e.jQuery)&&((s=t).fn.imagesLoaded=function(t,e){return new n(this,t,e).jqDeferred.promise(s(this))})})(),n});